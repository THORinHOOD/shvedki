(this.webpackJsonpshvedki=this.webpackJsonpshvedki||[]).push([[0],{13:function(e,t,n){},22:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n(3),a=n.n(s),o=n(12),l=n.n(o),c=(n(22),n(1)),r=n(2),d=n(6),h=n(7),u=(n.p,n(13),n(23).Chess,function e(){Object(c.a)(this,e)}),p=(n(15),n(16)),y=n(14),b=(a.a.PureComponent,n(14),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={login:null,client:null,ingame:!1,connected:!1,yourLastTurn:null,additionalPieces:{queen:0,horse:0,elephant:0,rook:0,pawn:0}},i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"connect",value:function(){var e=this,t=document.getElementById("login").value;this.state.client=new p.w3cwebsocket("wss://92.63.102.199:5000/"+t),this.state.client.onopen=function(){console.log("Connected"),e.setState({connected:!0,login:t})},this.state.client.onmessage=function(t){console.log("Got message in Game"),console.log(t);var n=JSON.parse(t.data);"choose_slot"==n.type?"OK"==n.status&&e.setState({ingame:!0}):"init"==n.type?e.onRecInit(n):"step"==n.type?e.onRecStep(n):"new_piece"==n.type?e.onRecNewPiece(n):"add_piece"==n.type&&e.onRecAddPiece(n)}}},{key:"enter",value:function(e){this.state.client.send(JSON.stringify({type:"choose_slot",slot:e}))}},{key:"onRecAddPiece",value:function(e){var t=this.state.additionalPieces;"p"==e.piece?(t.pawn=t.pawn+1,this.setState({additionalPieces:t}),document.getElementById("pawnCount").innerHTML="\u041f\u0435\u0448\u043a\u0438 : "+t.pawn):"l"==e.piece?(t.rook=t.rook+1,this.setState({additionalPieces:t}),document.getElementById("rookCount").innerHTML="\u041b\u0430\u0434\u044c\u0438 : "+t.rook):"k"==e.piece?(t.horse=t.horse+1,this.setState({additionalPieces:t}),document.getElementById("horseCount").innerHTML="\u041a\u043e\u043d\u0438 : "+t.horse):"s"==e.piece?(t.elephant=t.elephant+1,this.setState({additionalPieces:t}),document.getElementById("elephantCount").innerHTML="\u0421\u043b\u043e\u043d\u044b : "+t.elephant):"f"==e.piece&&(t.queen=t.queen+1,this.setState({additionalPieces:t}),document.getElementById("queenCount").innerHTML="\u0424\u0435\u0440\u0437\u0438 : "+t.queen)}},{key:"newPiece",value:function(e,t){var n=document.getElementById("firstBoard"),i=document.getElementById("secondBoard");e.login==this.state.players[t]?n.setPosition(e.new_piece):i.setPosition(e.new_piece)}},{key:"onRecNewPiece",value:function(e){this.state.login==this.state.players[0]?this.newPiece(e,2):this.state.login==this.state.players[1]?this.newPiece(e,3):this.state.login==this.state.players[2]?this.newPiece(e,0):this.state.login==this.state.players[3]&&this.newPiece(e,1)}},{key:"move",value:function(e,t){var n=document.getElementById("firstBoard"),i=document.getElementById("secondBoard");e.login==this.state.players[t]?n.move(e.step):i.move(e.step)}},{key:"onRecStep",value:function(e){this.state.login==this.state.players[0]?this.move(e,2):this.state.login==this.state.players[1]?this.move(e,3):this.state.login==this.state.players[2]?this.move(e,0):this.state.login==this.state.players[3]&&this.move(e,1)}},{key:"getColor",value:function(){return this.state.login==this.state.players[0]||this.state.login==this.state.players[3]?"w":"b"}},{key:"setLoginsToLabels",value:function(){document.getElementById("label0").innerHTML=this.state.login,this.state.login==this.state.players[0]?(document.getElementById("label1").innerHTML=this.state.players[2],document.getElementById("label2").innerHTML=this.state.players[3],document.getElementById("label3").innerHTML=this.state.players[1]):this.state.login==this.state.players[1]?(document.getElementById("label1").innerHTML=this.state.players[3],document.getElementById("label2").innerHTML=this.state.players[2],document.getElementById("label3").innerHTML=this.state.players[0]):this.state.login==this.state.players[2]?(document.getElementById("label1").innerHTML=this.state.players[0],document.getElementById("label2").innerHTML=this.state.players[1],document.getElementById("label3").innerHTML=this.state.players[3]):this.state.login==this.state.players[3]&&(document.getElementById("label1").innerHTML=this.state.players[1],document.getElementById("label2").innerHTML=this.state.players[0],document.getElementById("label3").innerHTML=this.state.players[2])}},{key:"updateNewPiece",value:function(e){if("Q"==e[1]){var t=this.state.additionalPieces;t.queen=t.queen-1,this.setState({additionalPieces:t}),document.getElementById("queenCount").innerHTML="\u0424\u0435\u0440\u0437\u0438 : "+t.queen}else if("R"==e[1]){var n=this.state.additionalPieces;n.rook=n.rook-1,this.setState({additionalPieces:n}),document.getElementById("rookCount").innerHTML="\u041b\u0430\u0434\u044c\u0438 : "+n.rook}else if("B"==e[1]){var i=this.state.additionalPieces;i.elephant=i.elephant-1,this.setState({additionalPieces:i}),document.getElementById("elephantCount").innerHTML="\u0421\u043b\u043e\u043d\u044b : "+i.elephant}else if("N"==e[1]){var s=this.state.additionalPieces;s.horse=s.horse-1,this.setState({additionalPieces:s}),document.getElementById("horseCount").innerHTML="\u041a\u043e\u043d\u0438 : "+s.horse}else if("P"==e[1]){var a=this.state.additionalPieces;a.pawn=a.pawn-1,this.setState({additionalPieces:a}),document.getElementById("pawnCount").innerHTML="\u041f\u0435\u0448\u043a\u0438 : "+a.pawn}}},{key:"checkNewPiecePlace",value:function(e){return"Q"==e[1]&&this.state.additionalPieces.queen>0||("R"==e[1]&&this.state.additionalPieces.rook>0||("B"==e[1]&&this.state.additionalPieces.elephant>0||("N"==e[1]&&this.state.additionalPieces.horse>0||"P"==e[1]&&this.state.additionalPieces.pawn>0)))}},{key:"onRecInit",value:function(e){var t=this;this.setState({players:[e.players[0],e.players[1],e.players[2],e.players[3]]},(function(){var e=document.getElementById("firstBoard"),n=document.getElementById("secondBoard");e.start(),n.start(),"b"==t.getColor()?e.flip():n.flip(),t.setLoginsToLabels(),e.addEventListener("drag-start",(function(e){var n=e.detail,i=n.source,s=n.piece;n.orientation;console.log(i),"w"==t.getColor()&&-1===s.search(/^w/)||"b"==t.getColor()&&-1===s.search(/^b/)?e.preventDefault():"spare"!=i||t.checkNewPiecePlace(s)||e.preventDefault()})),n.addEventListener("drag-start",(function(e){e.preventDefault()})),e.addEventListener("drop",(function(e){var n=e.detail,i=n.source,s=n.target,a=n.piece,o=n.newPosition,l=n.oldPosition;n.orientation;console.log(l),"spare"==i?(t.updateNewPiece(a),t.state.client.send(JSON.stringify({type:"new_piece",new_piece:o,piece_type:a[1],position:s}))):t.state.client.send(JSON.stringify({type:"step",step:i+"-"+s}))}))}))}},{key:"render",value:function(){var e=this;return this.state.connected?this.state.connected&&!this.state.ingame?Object(i.jsx)("div",{children:Object(i.jsx)("table",{children:Object(i.jsxs)("td",{children:[Object(i.jsx)("tr",{children:Object(i.jsx)("button",{onClick:function(){return e.enter(0)},children:"0 \u0441\u043b\u043e\u0442 \u0431\u0435\u043b\u044b\u0439 (1 \u043a\u043e\u043c\u0430\u043d\u0434\u0430)"})}),Object(i.jsx)("tr",{children:Object(i.jsx)("button",{onClick:function(){return e.enter(1)},children:"1 \u0441\u043b\u043e\u0442 \u0447\u0435\u0440\u043d\u044b\u0439 (1 \u043a\u043e\u043c\u0430\u043d\u0434\u0430)"})}),Object(i.jsx)("tr",{children:Object(i.jsx)("button",{onClick:function(){return e.enter(2)},children:"2 \u0441\u043b\u043e\u0442 \u0447\u0435\u0440\u043d\u044b\u0439 (2 \u043a\u043e\u043c\u0430\u043d\u0434\u0430)"})}),Object(i.jsx)("tr",{children:Object(i.jsx)("button",{onClick:function(){return e.enter(3)},children:"3 \u0441\u043b\u043e\u0442 \u0431\u0435\u043b\u044b\u0439 (2 \u043a\u043e\u043c\u0430\u043d\u0434\u0430)"})})]})})}):Object(i.jsx)("div",{children:Object(i.jsx)("table",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsxs)("div",{className:"chessBoard",children:[Object(i.jsx)("label",{id:"label1",for:"firstBoard",children:"Kek"}),Object(i.jsx)("chess-board",{className:"board",id:"firstBoard","spare-pieces":!0,position:"start","draggable-pieces":!0}),Object(i.jsx)("label",{id:"label0",for:"firstBoard",children:"Kek2"}),Object(i.jsx)("table",{children:Object(i.jsx)("td",{children:Object(i.jsxs)("tr",{children:[Object(i.jsxs)("div",{id:"queenCount",children:["\u0424\u0435\u0440\u0437\u0438 : ",this.state.additionalPieces.queen]}),Object(i.jsxs)("div",{id:"horseCount",children:["\u041a\u043e\u043d\u0438 : ",this.state.additionalPieces.horse]}),Object(i.jsxs)("div",{id:"elephantCount",children:["\u0421\u043b\u043e\u043d\u044b : ",this.state.additionalPieces.elephant]}),Object(i.jsxs)("div",{id:"rookCount",children:["\u041b\u0430\u0434\u044c\u0438 : ",this.state.additionalPieces.rook]}),Object(i.jsxs)("div",{id:"pawnCount",children:["\u041f\u0435\u0448\u043a\u0438 : ",this.state.additionalPieces.pawn]})]})})})]})}),Object(i.jsx)("td",{children:Object(i.jsxs)("div",{className:"chessBoard",children:[Object(i.jsx)("label",{id:"label2",for:"secondBoard",children:"Kek4"}),Object(i.jsx)("chess-board",{id:"secondBoard","spare-pieces":!0,position:"start"}),Object(i.jsx)("label",{id:"label3",for:"thirdBoard",children:"Kek3"})]})})]})})}):Object(i.jsx)("div",{children:Object(i.jsx)("table",{children:Object(i.jsxs)("td",{children:[Object(i.jsx)("tr",{children:Object(i.jsx)("input",{id:"login",placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(i.jsx)("tr",{children:Object(i.jsx)("button",{onClick:function(){return e.connect()},children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f"})})]})})})}}]),n}(a.a.PureComponent)),j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),s(e),a(e),o(e)}))};l.a.render(Object(i.jsx)(a.a.Fragment,{children:Object(i.jsx)(b,{})}),document.getElementById("root")),j()}},[[51,1,2]]]);
//# sourceMappingURL=main.853c4d8c.chunk.js.map